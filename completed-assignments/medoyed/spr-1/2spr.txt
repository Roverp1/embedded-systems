ARG1	EQU	20h
ARG2	EQU	22h
DIV	EQU	25h
ROB	EQU	30h

	LJMP	START
	ORG	100H
START:
	LCALL	LCD_CLR	
	MOV	DPTR, #TXT3
	LCALL	WRITE_TEXT
	
	MOV	R0, #ARG1
	LCALL	GET_NUM
	LCALL	BCD_HEX
	MOV	A, 21h
	JNZ	ERROR1
	
	MOV	A, #'/'
	LCALL	WRITE_DATA
	
	MOV	R0, #ARG2
	LCALL	GET_NUM
	LCALL	BCD_HEX
	MOV	A, 23h
	JNZ	ERROR2
	MOV	A, ARG2
	JZ	ERROR2
	AJMP	CONT

ERROR1:
	MOV	DPTR, #TXT_ERR
	LCALL	WRITE_TEXT
	LCALL	WAIT_KEY
	AJMP	START

ERROR2:
	MOV	DPTR, #TXT_ERR
	LCALL	WRITE_TEXT
	LCALL	WAIT_KEY
	AJMP	START

CONT:
	MOV	DPTR, #TXT1
	LCALL	WRITE_TEXT
	LCALL	WAIT_KEY
	LCALL	LCD_CLR

	MOV	A, ARG2
	MOV	B, A
	MOV	A, ARG1
	DIV	AB
	MOV	DIV, A
	MOV	A, B
	MOV	DIV+1, A

	ACALL	ZERUJ_ROB
	MOV	A, ARG1
	MOV	ROB, A
	MOV	R0, #ROB
	LCALL	HEX_BCD
	ACALL	PISZ_BCD
	
	MOV	A, #'/'
	LCALL	WRITE_DATA
	
	ACALL	ZERUJ_ROB
	MOV	A, ARG2
	MOV	ROB, A
	MOV	R0, #ROB
	LCALL	HEX_BCD
	ACALL	PISZ_BCD
	
	MOV	A, #'='
	LCALL	WRITE_DATA
	
	ACALL	ZERUJ_ROB
	MOV	A, DIV
	MOV	ROB, A
	MOV	R0, #ROB
	LCALL	HEX_BCD
	ACALL	PISZ_BCD

	MOV	A, DIV+1
	JZ	SKIP_R
	MOV	A, #' '
	LCALL	WRITE_DATA
	MOV	A, #'R'
	LCALL	WRITE_DATA
	MOV	A, #'='
	LCALL	WRITE_DATA
	ACALL	ZERUJ_ROB
	MOV	A, DIV+1
	MOV	ROB, A
	MOV	R0, #ROB
	LCALL	HEX_BCD
	ACALL	PISZ_BCD

SKIP_R:
	MOV	DPTR, #TXT2
	LCALL	WRITE_TEXT
	LCALL	WAIT_KEY
	AJMP	START

PISZ_BCD:
	MOV	A, ROB+2
	JZ	PB1
	ACALL	PISZ_BAJT
PB1:
	MOV	A, ROB+1
	CJNE	A, #0, PB2
	MOV	A, ROB+2
	JZ	PB3
PB2:
	MOV	A, ROB+1
	ACALL	PISZ_BAJT
PB3:
	MOV	A, ROB
	ACALL	PISZ_BAJT
	RET

PISZ_BAJT:
	MOV	R1, A
	SWAP	A
	ANL	A, #0Fh
	JZ	E1
	ACALL	PISZ_CYFRA
E1:
	MOV	A, R1
	ANL	A, #0Fh
	ACALL	PISZ_CYFRA
	RET

PISZ_CYFRA:
	MOV	R0, A
	CLR	C
	SUBB	A, #10
	JNC	E2
	MOV	A, R0
	ADD	A, #48
	AJMP	E3
E2:
	MOV	A, R0
	ADD	A, #55
E3:
	LCALL	WRITE_DATA
	RET

ZERUJ_ROB:
	CLR	A
	MOV	ROB, A
	MOV	ROB+1, A
	MOV	ROB+2, A
	RET

TXT1:	DB	' klik',0
TXT2:	DB	'       klik',0
TXT3:	DB	'Wpisz arg. <=255',0
TXT_ERR:	DB	' ERROR',0

	END
